# File

## 参数文件

### 什么是参数

可以把数据库参数看程一个键值对。

### 参数类型

* 动态（dynamic）参数
* 静态（static）参数

## 日志文件

* 错误日志（error log）
* 二进制日志（binlog）
* 慢查询日志（slow query log）
* 查询日志（log）
  
### 错误日志

错误日志文件对MySQL的启动、运行、关闭过程进行了记录。在遇到问题时应该首先查看该文件以便定位问题。

### 慢查询日志

帮助DBA定位可能存在问题的SQL语句，从而进行SQL语句层面的优化。

### 查询日志

记录了所有对MySQL数据库请求的信息，无论这些请求是否得到了正确的执行。默认文件名：主机名.log。

### 二进制日志

记录了对MySQL数据库执行更改的所有操作，但是不包含SELECT和SHOW这类操作，因为这类操作对数据本身并没有修改。

二进制日志主要有以下几种作用：

* 恢复（recovery）：某些数据的恢复需要二进制文件，可以进行point-in-time的恢复。
* 复制（replication）：是一台远程的MySQL数据库（slave或standby）与一台MySQL数据库（master或primary）进行实时同步。
* 审计（audit）：通过二进制日志中的信息判断是否有对数据库进行注入的攻击。

开启二进制日志会使性能下降1%。

## 套接字文件

在UNIX系统下本地连接MySQL可以采用UNIX域套接字方式，这种方式需要一个套接字文件。一般为/tmp/mysql.sock。

## pid文件

当MySQL实例启动时，会将自己的进程ID写入一个文件中--该文件即为pid文件。

## 表结构定义文件

因为MySQL插件式存储引擎的体系结构的关系，数据的存储是根据表进行的，每个表都会有与之对应的文件。不论何种引擎，会有一个.frm后缀名的文件记录表结构定义。

## InnoDB存储引擎文件

包括重做日志文件、表空间文件

### 表空间文件

InnoDB采用将存储的数据按表空间（tablespace）进行存放的设计。默认的表空间文件的配置名为ibdata。设置innodb_data_file_path参数后，所有基于InnoDB存储引擎的表的数据都会记录到该共享表空间中。若设置了innodb_file_per_table，则用户可以将每个基于InnoDB存储引擎的表产生一个独立表空间，命名规则为：表名.ibd。

### 重做日志文件

默认情况下，在InnoDB存储引擎的数据目录下会有两个名为ib_logfile0和ib_logfile1的文件。记录了对于InnoDB存储引擎的事务日志。

当实例或介质失败（media failure）时，重做日志文件就能派上用场。

在日志组中每个重做日志文件的大小一致，并以循环写入的方式运行。InnoDB存储引擎先写重做日志文件1，当达到文件的最后时，切换到2，再当2也被写满时，会再切换到1中。

重做日志文件不能设置太大，太大在恢复时需要很长的时间；设置太小会导致一个事务的日志需要多次切换重做日志文件，此外会频繁发生async checkpoint，导致性能的抖动。

从重做日志缓存是按512字节也就是一个扇区的大小写入磁盘。扇区是写入的最小单位，因此可以保证写入必定是成功的。

为了保持事务的ACID中的持久性，必须将innodb_flush_log_at_trx_commit设置为1，也就是每当事务提交时，必须确保事务都已经写入重做日志文件。
