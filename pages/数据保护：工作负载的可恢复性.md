- 第1章 数据所面临的风险，为什么要备份数据
	- 1.1 人为错误
		- 1.1.1 操作失误
		- 1.1.2 代码错误
		- 1.1.3 恶意攻击
		- 1.1.4 恐怖攻击
			- 321的1，要把其中一个备份放到远处。
		- 1.1.5 电子攻击
		- 1.1.6 勒索软件ransomware
		- 1.1.7 内部威胁
			- 让他们总是以自己的身份登陆系统
			- 不要把root密码告诉任何人
			- 删除或禁用那种能够提供shell环境的程序
			- 让超级用户只能通过控制台登陆
			- 启用主机之外的记录机制
			- 不让计算机从其他启动盘启动
			- 1.1.7.1 将各种权限分离
			- 1.1.7.2 基于角色的管理 role-based administration
			- 1.1.7.3 最低权限
			- 1.1.7.4 多人认证机制
	- 1.2 机械故障或系统故障
		- Raid与纠删码
		- 1.2.1 电力中断
		- 1.2.2 云平台没有那么神奇
		- 1.2.3 系统故障
	- 1.3 自然灾害
		- 1.3.1 水灾
		- 1.3.2 火灾
		- 1.3.3 地震
		- 1.3.4 飓风、台风、旋风
		- 1.3.5 龙卷风
		- 1.3.6 落水洞
	- 1.4 小结
		- 备份并不是重点，重点在于有备份，才能恢复数据。
- 第2章 收集需求并确定数据保护系统所应达到的服务水准
	- 2.1 了解组织的工作内容
	- 2.2 构建自己的框架
	- 2.3 收集需求
		- 2.3.1 确定RPO与RTO
		- 2.3.2 寻找SME
		- 2.3.3 厘清需求
		- 2.3.4 评审需求
	- 2.4 设计并构建数据保护系统
		- 2.4.1 起草多种设计方案
			- 提出多种满足需求的设计方案-每种方案的价格、实际恢复时间（Recovery Time Actual, RTA)、实际恢复点（Recovery Point Actual，RPA）都不同。
			- 第一种方案总应该是那种无论要什么都尽量安排，无论花多少钱。
		- 2.4.2 评审设计方案
		- 2.4.3 挑选部件并以此构建数据保护系统
	- 2.5 编写操作文档并将此数据保护系统纳入工作环境
		- 2.5.1 界定每个人的操作角色
		- 2.5.2 编写操作文档
		- 2.5.3 劝说大家编写文档
			- 写文档才是你最应该做的事情。想去度假？想休息一天？如果这个系统有问题，大家总是来找你解决，那就不要想了。
		- 2.5.4 文档具体该怎么写
			- SOP, standard operating procedure
		- 2.5.5 把这个新数据保护系统纳入工作环境
			- CAB(变更咨询委员会)
- 第3章 备份与档案区别很大
	- 3.1 探讨两者区别之前的思想准备
	- 3.2 什么是备份
		- 备份是对数据所做的一份copy，它与原数据分开存放，并且能够把这份数据恢复到早前的状态，之所以恢复，通常是因为原数据受某种原因影响而遭到删除或破坏。
		- 3.2.1 备份必须是一份copy
			- 依赖原数据而存在的快照，不是一份合格的copy，必须把它重制（也就是复制）到其他地方，才能让它成为一份真正的copy。
		- 3.2.2 备份必须与原数据分开存放
		- 3.2.3 备份必须能够用来恢复数据
			- archive符合前两项要求，但不是用来恢复数据的，它们是用来获取数据的，这跟恢复数据不是一回事。
		- 3.2.4 什么是恢复
			- 指的是一种通过备份让数据回到早前状态的操作。
		- 3.2.5 数据是怎样得到恢复的
		- 3.2.6 3-2-1原则
			- 3.2.6.1 至少对数据做3个版本的备份
				- 有时会接连发生失误，最近的那个备份可能是在文件已经破坏的时候制作的，如果用这个版本的备份恢复数据，那么恢复出来的文件依然是坏的。因此，至少保留3个版本。
			- 3.2.6.2 把备份放在2个不同的介质中
			- 3.2.6.3 将其中1份放在远处
				- 对于云端资源来说，最好能在另一个区里单独创建一个账号，让这个账号专门用来保存备份数据，并把其他区里的哪些账号所制作的备份全部汇给这个账号。这个账号最好支持多人认证，这样必须有两个人登录该账号才能删除备份。
	- 3.3 什么是档案
		- 档案是存放在另一个地方的数据副本，是一种用来做参考的副本，其中存储着必要的metadata，让我们不用指出来源，就能找到所需的数据。
		- 档案与备份之间的真正区别在于：为了不同的目标而保存档案与备份，获取的理由不同，保存方式及获取方式也不同。
		- 3.3.1 档案是为了参考而制作的
		- 3.3.2 档案里有附加的metadata
		- 3.3.3 什么是获取
	- 3.4 保护备份数据与档案数据
		- 3.4.1 加密
			- 备份数据只应该由备份程序来访问，一定要给备份加密，这样就算有人入侵云平台并且拿到了备份，他也读不懂其中的内容。
		- 3.4.2 设置屏障 air gap
			- 3.4.2.1 物理屏障
				- 比如将磁带交给保管方保管。
			- 3.4.2.2 虚拟屏障
				- 确保数据不可变。
				- 禁用或限制使用RDP（远程桌面协议）
				- 使用不同的操作系统
				- 把存放备份数据的地方跟其他东西隔开，比如nfs
				- 使用对象存储系统
				- 使用不可变的存储机制
				- 使用磁带保存备份数据
				- 使用特制备份服务
					- 有这样一种备份服务，即便是系统管理员也没有办法登录到运行该服务的备份服务器上。
		- 3.4.3 不可变性
			- 必须确保备份与档案数据不会遭到无意或恶意的擦除与破坏。
			- 没有什么东西能做到绝对不可变
			- 必须施加多种管控措施以确保不可变性
			- 不可变并不意味着不会遭到破坏
			- 许多号称不可变的机制其实并非真正的不可变
- 第4章 备份与恢复的基础知识
	- 4.1 恢复测试
		- 没有经过测试的备份不算真正的备份！
	- 4.2 备份级别
		- 4.2.1 传统意义上的完全备份
		- 4.2.2 传统意义上的增量备份
			- 4.2.2.1 标准的增量备份
				- typical incremental bacu是把从上次备份算起发生变化的所有数据都备份下来，无论上次是全量还是增量备份。
			- 4.2.2.2 积累式的增量备份
				- 差量备份
			- 4.2.2.3 带有层次的增量备份
				- 汉诺塔备份方案
			- 4.2.2.4 块级别的增量备份
			- 4.2.2.5 源数据端的重复数据删除
				- 简称源端去重
				- 判断新“块”是否已经啊发送到备份服务器了。
			- 4.2.2.6 合成式的完全备份
				- 通过复制制作合成式的完全备份
				- 通过目标去重设备来模拟合成式的完全备份
				- 从刚开始就一直做增量备份
		- 4.2.3 备份级别真的那么重要吗
	- 4.3 数据保护系统的各项指标
		- 4.3.1 与恢复有关的指标
			- 4.3.1.1 RTO
				- Recovery Time Objective，恢复时间目标用来表示系统在遇到事故之后，需要花多长时间才能恢复。
			- 4.3.1.2 RPO
				- Recovery Point Objective，恢复点目标是指遇到事故之后，最多能允许多长时间内的数据遭受损失。
			- 4.3.1.3 在沟通中确定RPO与RTO
				- 如果组织有理由要把RTO与RPO压到0或者某个接近0的值，那么应该说明停工时遭受多少损失，以表明花费大量资金来压低RTO与RPO是值得的，不这么做的损失更大。
			- 4.3.1.4 RTA与RPA
				- 实际恢复时间与实际恢复点，只有在执行恢复时才能测量，用来表示受测系统能够在多大程度上满足RTO和RPO目标。
			- 4.3.1.5 测试该系统的实际恢复效果
				- 不仅要熟悉备份，还要熟悉恢复，办法是做恢复测试。
		- 4.3.2 与系统的能力或容量有关的指标
			- 4.3.2.1 系统对授权与工作负载的使用量
			- 4.3.2.2 总的存储容量与已使用的容量
			- 4.3.2.3 数据处理速度
			- 4.3.2.4 计算能力
		- 4.3.3 备份窗口
		- 4.3.4 备份与恢复的成功率与失败率
			- 应该有人把执行备份与恢复的次数记录下来，并计算出各自的成功率。
		- 4.3.5 保留测率
			- 被遗忘权
				- Right to be forgotten，RTBF，这个权力的正式说法应该是擦除权（right to erasure）。
		- 4.3.6 利用各项指标
	- 4.4 涉及备份与档案的一些误解
		- RAID不需要备份
			- RAID所能提供的冗余是在硬件层面，无法保护文件系统层面的丢失。
		- 启用了数据复制机制就不用再做备份了
			- 复制或者重制只是把所有东西都照搬一遍，无论正确与否。
		- IaaS与PaaS不需要备份
			- 高可用性无法防范误操作、网络攻击或者数据中心遭到物理破坏的情况。
			- 重点在于，一定要把云端备份跟云端主账号分开存放，而且不要放在跟主数据相同的区域里面。
		- SaaS不需要备份
			- SaaS厂商顶多提供利用版本管理系统与回收站等机制而打造的便捷恢复功能，无法防范严重故障或网络攻击。
		- 备份系统应该把备份数据保存好多年，以便从中调取信息
			- 备份产品通常不用来做档案方面的工作。
		- 磁带已经消亡
		- 把备份当成档案来用，成本真的相当高
	- 4.5 条目级备份与镜像级备份
		- item-level backup和image-level backup。
		- 4.5.1 条目级备份
			- 常见形式是文件。另外一种形式是对象存储系统里面的对象。优势在于这种备份方式特别好懂。
		- 4.5.2 镜像级备份
			-