- 参考
	- [(27条消息) KVM - qcow2 和 raw 格式对比_Suhw的博客-CSDN博客_qcow2 raw](https://blog.csdn.net/sssssuuuuu666/article/details/106999198)
	- ![Linux_File_Hole_And_Sparse_Files.pdf](../assets/Linux_File_Hole_And_Sparse_Files_1677501383832_0.pdf)
- 准备知识
	- ls和du的区别
		- ls - list directory contents
		- du - estimate file space usage
		- 在Linux中，一个文件占用的磁盘大小和一个文件的大小在众多情况下并不相等。因为占用空间取决于文件系统的块（block）大小，一个大小未1bytes的文件，最小也要占用linux默认的块大小4k。
	- 创建指定大小的文件
		- truncate
			- 将文件缩减或扩展至指定大小。如果指定文件超出指定大小则超出的数据将丢失。 如果指定文件小于指定大小则用 0 补足。（同样形成文件空洞，不会真实文件对应得改变磁盘大小）
		- dd
			- 读取、转换并输出数据
			- 使用seek进行文件偏移，会形成文件空洞
		- fallocate
			- 为文件预分配物理空间。ll和du显示相同。
	- 文件空洞
	  在Unix文件操作中，文件偏移量可以大于文件的当前长度，下一次写将延长该文件，在文件中构成一个空洞，位于文件中但没有写过的字节都被设为0。
		- 文件空洞的表现
		  表现和普通文件相同，但是实际上文件系统并没有为空洞文件分配与逻辑大小相同的磁盘空间大小。
	- 稀疏文件
		- 文件中留有很多空余空间，留备将来插入数据使用。如果这些空余空间被ASCII码的NULL字符占据，并且这些空间相当大，则称为稀疏文件，这些多余得空间并不分配对应的磁盘块。
- 镜像格式
	- qcow2(qemu copy on write 2)
	- 与普通的raw格式的镜像相比，有以下特性：
		- 不支持稀疏，更小的占用空间，即使文件系统不支持空洞
		- 支持写时拷贝（cow，copy on write），镜像文件只反映底层磁盘的变化
		- 支持快照
		- 基于zlib的压缩方式
		- 可选择AES加密
	- raw
	  又被称为原始镜像或裸设备镜像，kvm的GuestOS可以直接从RAW镜像中启动，支持空洞特性。
		- 优点
			- dd创建一个文件就能模拟
			- 性能较qcow2更高
			- 支持裸设备原生特性，例如直接挂载
			- 随意转换格式
			- dd指令可追加空间
		- 缺点
			- 由于支持空洞ls文件很大，传输时消耗网络io
		-
	-
-